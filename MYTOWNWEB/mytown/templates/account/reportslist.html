<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Table Example</title>
<style>
html {
  height: 100%;
}

body {
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif; 
  background: linear-gradient(#fff, #243b55);
}

.table-list-container {
  max-width: 800px;
  margin: 20px auto;
  background-color: #ffffff;
  border: 1px solid #d2d2d2;
  position: relative;
  z-index: 0;
}

@media (max-width: 640px) {
  .table-list-container {
    border-width: 1px 0;
  }
}

.table-list {
  min-height: 176px;
}

.table-list th {
  border-bottom: 1px solid #d2d2d2;
}

.table-list td {
  white-space: nowrap;
  height: 1.75rem;
  vertical-align: top;
  padding: 10px;
  border-bottom: 1px solid #d2d2d2;
}

.table-list tr:last-child td {
  height: auto;
}

/* Sort styles */
th button.sort {
  text-align: left;
  padding: 0 10px;
  line-height: 1.75rem;
  border: none;
  background: none;
  display: block;
  width: 100%;
  font-size: 12px;
  color: #888;
  border-bottom: 1px solid transparent;
}

th button.sort.textcenter,
th button.sort.text-center {
  text-align: center;
}

th button.sort.textright,
th button.sort.text-right {
  text-align: right;
}

button.sort .bullet {
  margin-top: 13px;
}

/* Sorting caret */
.table-list .caret:after {
  content: "";
}

.asc .caret:after,
.desc .caret:after {
  width: 0;
  height: 0;
  border-left: 3px solid transparent;
  border-right: 3px solid transparent;
  content: "";
  position: relative;
  font-size: 0;
}

.asc .caret:after {
  border-top: 3px solid #808080;
  top: -3px;
  right: -4px;
}

.desc .caret:after {
  border-bottom: 3px solid #808080;
  top: -4px;
  right: -4px;
}

button.sort .caret {
  display: none;
}

button.sort.asc .caret,
button.sort.desc .caret {
  display: inline-block;
}

/* Table footer */
.table-footer {
  background-color: #fff;
  margin-top: -1px;
  position: relative;
  z-index: -1;
}

.table-search {
  width: 310px;
  border-left: 1px solid #d2d2d2;
}

.table-search .search {
  width: 100%;
  border: none;
  background: transparent;
  box-shadow: none;
}

/* Table pagination */
.table-pagination {
  white-space: nowrap;
}

.table-pagination:after {
  display: block;
  content: "";
  clear: both;
}

.jPaginateBack,
.jPaginateNext,
.table-list-container .pagination {
  float: left;
}

.jPaginateBack,
.jPaginateNext {
  line-height: 1.75rem;
  width: 1.75rem;
  text-align: center;
  user-select: none;
}

.jPaginateBack .material-icons,
.jPaginateNext .material-icons {
  display: block;
  font-size: 16px;
  line-height: inherit;
}

/* Custom check button */
.check-button {
  cursor: pointer;
}

.check-button:before {
  content: '\2713'; /* Checkmark symbol */
  display: inline-block;
  margin-right: 5px;
}

.check-button.checked:before {
  content: '\2714'; /* Heavy checkmark symbol */
}
</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="#">MyTown</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">My Account</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">My Reports</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Add Report</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Contact us</a>
          </li>
        </ul>
      </div>
    </div>
</nav>

<hr>

<div id="tableID" class="table-list-container">
    <table class="table-list" data-currentpage="1" style="height:268px;">
        <thead>
            <th><button type="button" class="sort" data-sort="timestamp">Date<i class="caret"></i></button></th>
            <th><button type="button" class="sort" data-sort="jSortNumber">#<i class="caret"></i></button></th>
            <th><button type="button" class="sort" data-sort="jSortTitle">Title <i class="caret"></i></button></th>
            <th>City</th> <!-- Updated to plain text -->
            <th><button type="button" class="sort" data-sort="jSortDescription">Description <i class="caret"></i></button></th>
            <th><button type="button" class="sort" data-sort="jSortLocation">Location <i class="caret"></i></button></th>
            <th><button type="button" class="sort" data-sort="jSortPhoto">Photo <i class="caret"></i></button></th>
            <th>Assign</th> <!-- Added column for assignment -->
        </thead>
        <tbody class="list">
            {% for report in reports %}
            <tr>
                <td>{{ report.timestamp }}</td>
                <td>{{ forloop.number }}</td>
               <td>{{ report.title }}</td>
                <td>{{ report.city }}</td>
                <td>{{ report.description }}</td>
                <td>{{ report.location }}</td>
                <td>{{ report.photo }}</td>
                <td class="assign-column"><span class="check-button"></span></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <table class="table-footer">
        <tr>
            <td class="table-pagination">
                <button type="button" class="jPaginateBack"><i class="material-icons keyboard_arrow_left">&#xe314;</i></button>
                <ul class="pagination"></ul>
                <button type="button" class="jPaginateNext"><i class="material-icons keyboard_arrow_right">&#xe315;</i></button>
            </td>
            <td></td>
            <td class="table-search">
                <input class="search" placeholder="Search">
            </td>
        </tr>
    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-7nxMmcvLlRViJj7zBBk9p3iQ+Oe1xsqE7JzRGz2u7WfI1K3AyHP8JLQiTzokXWf1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-YVxATVowH9W+VjPTj6qQVJo9wXO+7Nz0X1/1+CtTfn+EaTob/p1Bg3g27pJuvQuE" crossorigin="anonymous"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Populate the date column with the current date
    const currentDate = new Date().toLocaleDateString('en-US');
    const dateCells = document.querySelectorAll('.table-list tbody tr td:nth-child(1)');
    dateCells.forEach(cell => {
        cell.textContent = currentDate;
    });

    // Assign a unique report number to each report
    const reportRows = document.querySelectorAll('.table-list tbody tr');
    reportRows.forEach((row, index) => {
        const reportNumberCell = row.querySelector('td:nth-child(2)');
        reportNumberCell.textContent = index + 1;
    });

    // Add event listener to the check buttons
    document.querySelectorAll('.check-button').forEach(button => {
        button.addEventListener('click', function() {
            this.classList.toggle('checked');
        });
    });

    // Restore checked state from localStorage
    const checkedReports = JSON.parse(localStorage.getItem('checkedReports')) || {};
    Object.keys(checkedReports).forEach(reportId => {
        const button = document.querySelector(`.check-button[data-report-id="${reportId}"]`);
        if (button) {
            if (checkedReports[reportId]) {
                button.classList.add('checked');
            }
        }
    });

    // Save checked state to localStorage
    document.querySelector('.table-list').addEventListener('click', function(event) {
        const button = event.target.closest('.check-button');
        if (button) {
            const reportId = button.getAttribute('data-report-id');
            const isChecked = button.classList.contains('checked');

            const checkedReports = JSON.parse(localStorage.getItem('checkedReports')) || {};
            checkedReports[reportId] = isChecked;
            localStorage.setItem('checkedReports', JSON.stringify(checkedReports));
        }
    });
});
</script>
</body>
</html>